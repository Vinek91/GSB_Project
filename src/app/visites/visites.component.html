<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Menu de navigation</title>
    </head>
    <body>
        <!-- Barre de navigation -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top" style="padding-left: 1%;">
            <!-- Logo et nom de l'entreprise -->
            <div class="navbar-brand" href="#"><img src="https://lheritierjeremy.files.wordpress.com/2016/04/logo-gsb.png" width="100" height="50" /> Galaxy Swiss Bourdin</div>
            <!-- Bouton pour afficher ou masquer les liens de navigation -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Liens de navigation -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <!-- Lien vers la page de connexion -->
                        <a class="nav-link" routerLink="/">Page de connexion</a>
                    </li>
                    <li class="nav-item">
                        <!-- Lien vers la page d'accueil -->
                        <a class="nav-link" routerLink="/accueil">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <!-- Lien vers la page de gestion des médecins -->
                        <a class="nav-link" routerLink="/medecins">Gestion des médecins</a>
                    </li>
                    <li class="nav-item active">
                        <!-- Lien vers la page de gestion des visites -->
                        <a class="nav-link" href="#" routerLink="/visites">Gestion des visites</a>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="fond">
            <!-- Div avec une classe "fond" pour le style CSS -->
            <h1>Gestion des visites</h1>
            <!-- Titre principal de la page -->
        </div>
        <br />
        <section class="fonctionnalites">
            <!-- Section avec une classe "fonctionnalites" pour le style CSS -->
            <div class="container">
                <!-- Div avec une classe "container" pour le style CSS -->
                <div class="row">
                    <!-- Div avec une classe "row" pour le style CSS -->
                    <div class="col-md-4">
                        <!-- Div avec une classe "col-md-4" pour le style CSS (colonne de taille moyenne pour les écrans de taille moyenne) -->
                        <h2>Modifier un rapport</h2>
                        <!-- Titre de la première fonctionnalité -->
                        <p>Vous pouvez modifier un rapport en saisissant son nom dans le champ de recherche, pour le mettre à jour.</p>
                        <!-- Description de la première fonctionnalité -->
                    </div>
                    <div class="col-md-4">
                        <!-- Div avec une classe "col-md-4" pour le style CSS (colonne de taille moyenne pour les écrans de taille moyenne) -->
                        <h2>Ajouter un rapport</h2>
                        <!-- Titre de la deuxième fonctionnalité -->
                        <p>Vous pouvez ajouter des rapports en spécifiant notamment les médicaments.</p>
                        <!-- Description de la deuxième fonctionnalité -->
                    </div>
                </div>
            </div>
        </section>
        <nav class="navbar navbar-inverse" style="background: #3fbbc0;">
            <!-- Barre de navigation avec une classe "navbar" pour le style CSS et un fond de couleur -->
            <ul class="nav navbar-nav" style="display: flex; flex-direction: row; justify-content: center;">
                <!-- Liste avec une classe "nav navbar-nav" pour le style CSS et un affichage en ligne avec une justification centrale -->
                <li>
                    <a (click)="modifierRapport()" class="btn btn-light" style="margin-left: 4%;">Modifier un rapport</a>
                    <!-- Bouton pour la première fonctionnalité avec une classe "btn btn-light" pour le style CSS et un décalage de marge à gauche -->
                </li>
                <li>
                    <a (click)="ajouterRapport()" class="btn btn-light">Ajouter un rapport</a>
                    <!-- Bouton pour la deuxième fonctionnalité avec une classe "btn btn-light" pour le style CSS -->
                </li>
            </ul>
        </nav>
        <br />
        <div class="all" style="margin: 10px;">
            <!-- Div avec une classe "all" pour le style CSS et un décalage de marge de 10 pixels -->
            <!--GESTION DE LA MISE A JOUR D'UN RAPPORT-->
            <div *ngIf="gestionMajRapport">
                <!--Recherche du rapport-->
                <div class="form-group">
                    <label for="date"> Date de la visite</label>
                    <input id="date" type="date" [(ngModel)]="dateVisite" (change)="chargerVisites()" style="width: 10%;" />
                </div>
                <br />
                <br />
                {{titre}}
                <br />
                <div class="alert" [hidden]="estCache">{{lblMessage}}</div>
                <div class="list-group">
                    <div class="list-group-item" *ngFor="let rapport of lesRapports" (click)="selectionner(rapport)">
                        <h3>{{rapport.nomMedecin}} {{rapport.prenomMedecin}}</h3>
                    </div>
                </div>
                <!--formulaire de MAJ du rapport-->
                <form class="formulaire" name="frmRapport" *ngIf="afficherRapport" (ngSubmit)="valider()">
                    <div class="form-group">
                        <label for="motif">Motif </label>
                        <textarea rows="3" cols="30" required="true" [(ngModel)]="rapport.motif" name="motif"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="bilan">Bilan</label>
                        <textarea rows="3" cols="30" required="true" [(ngModel)]="rapport.bilan" name="bilan"></textarea>
                    </div>
                    <button type="submit" class="btn btn-success">Valider</button>
                    <div class="{{typeMessage}}">{{messageMAJ }}</div>
                </form>
            </div>
            <!--GESTION DE L'AJOUT D'UN RAPPORT-->
            <section class="aa">
                <div *ngIf="gestionAjoutRapport">
                    <!--Recherche du médecin -->
                    <div class="col-lg-6">
                        <div class="form-group search-group">
                            <input type="search" placeholder="Sélectionner le médecin" [(ngModel)]="nomMedecin" (keyup)="chargerMedecins()" id="medecin" />
                            <button type="button">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </div>
                    <br />
                    <br />
                    <div class="list-group" style="gap: 18px; overflow-y: auto; max-height: 40vh; margin: auto; width: 50%;">
                        <div class="list-group-item" *ngFor="let medecin of lesMedecins" (click)="selectionnerMedecin(medecin)">
                            <h3>{{medecin.nom}} {{medecin.prenom}}</h3>
                            <p>Département : {{medecin.departement}}</p>
                        </div>
                    </div>
                    <br />
                    <!--Formulaire de saisie des infos du rapport -->
                    <form class="col-lg-6" (ngSubmit)="enregistrer()">
                        <div class="formulaire">
                            <div class="form-group">
                                <label for="motif"> Motif </label>
                                <textarea type="text" [(ngModel)]="motif" class="form-control" required="true" name="motif"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="bilan"> Bilan </label>
                                <textarea type="text" [(ngModel)]="bilan" class="form-control" required="true" name="bilan"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="date">Date : </label>
                                <input type="date" required="true" [(ngModel)]="dateNouveauRapport" name="date" />
                            </div>
                        </div>
                        <!--Gestion des médicaments offerts -->
                        <br />
                        <hr />
                        <br />
                        <h2>Médicaments offerts</h2> <!-- Titre de la section -->

                        <!-- Formulaire de recherche et de sélection de médicaments -->
                        <div class="medicaments">
                            <table>
                                <tr>
                                    <td>
                                        <!-- Champ de recherche pour filtrer les médicaments -->
                                        <div class="form-group search-group" style="width: 90%;">
                                            <input type="search" placeholder="Nom du médicament..." [(ngModel)]="nomMedicament" (keyup)="chargerMedicaments()" name="nomMedicament" />
                                            <button type="button">
                                                <i class="fa fa-search"></i>
                                            </button>
                                        </div>
                                        <br />
                                        <br />
                                        <!-- Liste des médicaments correspondant au critère de recherche -->
                                        <div class="list-group" style="max-height: 19vh; margin-top: -35px; gap: 5px; overflow-x: hidden;">
                                            <div class="list-group-item" *ngFor="let medicament of lesMedicaments" (click)="choisirMedicament(medicament)">
                                                {{medicament.nomCommercial }}
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <!-- Sélecteur de quantité pour le médicament sélectionné -->
                                        <div class="form-group">
                                            <label for="qteSelect"> Quantité</label>
                                            <select [(ngModel)]="qteSelect" class="form-control" name="qteSelect">
                                                <option *ngFor="let qte of qtes " value="{{qte}}">{{qte}}</option>
                                            </select>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <!-- Boutons pour ajouter ou retirer le médicament sélectionné de la liste -->
                                        <button type="button" class="btn btn-success" (click)="ajouter()">Ajouter</button>
                                        <button type="button" class="btn btn-danger" (click)="retirer()">Retirer</button>
                                    </td>
                                    <td>
                                        <!-- Liste des médicaments sélectionnés avec leur quantité respective -->
                                        <ul>
                                            <li *ngFor="let med of medicamentsSelect">
                                                {{med.nom}} : {{med.qte}}
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        
                        <br />
                        
                        <!-- Bouton pour enregistrer les médicaments sélectionnés -->
                        <button type="submit" class="btn-group btn-group-justified btn btn-primary" style="width: 200px; display: block; text-align: center;">Enregistrer</button>
                        
                        <!-- Zone d'affichage des messages d'enregistrement -->
                        <div class="{{typeMessage}}">{{messageEnregistrement}}</div>
                    </form>                        
                </div>
            </section>
        </div>
    </body>
</html>
